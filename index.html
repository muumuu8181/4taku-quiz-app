<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4択プログラムクイズアプリ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 上パネル: タイトル固定 -->
    <div class="top-panel">
        <div class="version" id="versionDisplay">v0.35</div>
        <h1>🖥️ プログラム4択クイズ</h1>
    </div>
    
    <!-- 下パネル: 切り替えコンテンツ -->
    <div class="bottom-panel">
        <!-- メニュー画面 -->
        <div class="menu-screen" id="menuScreen">
            <h2>プログラミングの知識をテストしよう！</h2>
            <p>プログラミングに関する4択問題を出題します。<br>1回5問ずつランダムに出題され、正解率を記録します。</p>
            
            <!-- クイズデータ差し替え機能（折りたたみ式） -->
            <div style="margin: 20px 0;">
                <button onclick="toggleQuizDataMenu()" style="background: #17a2b8; width: 100%; margin-bottom: 10px;">
                    📁 クイズデータを差し替え <span id="toggleIcon">▼</span>
                </button>
                <div id="quizDataMenu" style="display: none; padding: 15px; border: 2px dashed #ddd; border-radius: 8px; background: #f9f9f9;">
                    <input type="file" id="quizFileInput" accept=".json,.txt" style="margin-bottom: 10px; width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <button onclick="loadQuizData()" style="background: #007bff; margin-right: 10px;">データを読み込む</button>
                    <button onclick="resetToDefault()" style="background: #6c757d;">デフォルトに戻す</button>
                    <p style="font-size: 0.8em; color: #666; margin-top: 10px;">JSON形式またはテキスト形式のクイズファイルを選択してください</p>
                </div>
            </div>
            
            <button onclick="startQuiz()" style="background: #28a745; font-size: 1.2em; padding: 15px 30px; margin: 20px 0;">🚀 クイズを始める</button>
            <button onclick="showStatistics()" style="background: #6f42c1; margin: 10px 5px;">📊 統計を見る</button>
            <button onclick="exportLog()" style="background: #17a2b8; margin: 10px 5px;">📥 ログをダウンロード</button>
        </div>
        
        <!-- クイズ画面 -->
        <div class="quiz-container" id="quizContainer">
            <div class="info">
                <div>問題: <span id="currentQuestion">1</span> / <span id="totalQuestions">5</span></div>
                <div>正解数: <span id="correctCount">0</span></div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="question" id="questionText"></div>
            
            <div class="options" id="optionsContainer"></div>
            
            <div class="auto-next-info" id="autoNextInfo" style="display: none;">
                正解が表示されました。0.2秒後に自動的に次の問題へ進みます...
            </div>
            
            <div class="buttons">
                <button id="nextBtn" onclick="nextQuestion()" style="display: none;">次の問題（手動）</button>
                <button onclick="showMenu()" style="background: #6c757d;">🏠 メニューに戻る</button>
            </div>
        </div>
        
        <!-- 結果画面 -->
        <div class="score-container" id="scoreContainer">
            <h2>クイズ完了！</h2>
            <div class="score">
                <span id="finalScore">0 / 5</span><br>
                <span id="percentage" style="font-size: 0.8em;">0%</span><br>
                <span id="timeTaken" style="font-size: 0.6em; color: #666;">0秒</span>
            </div>
            <p id="scoreMessage"></p>
            <div class="buttons">
                <button onclick="startQuiz()" style="background: #28a745;">🔄 もう一度挑戦</button>
                <button onclick="showMenu()" style="background: #6c757d;">🏠 メニューに戻る</button>
            </div>
        </div>
        
        <div id="logOutput" style="display: none;"></div>
        
        <!-- 統計表示画面 -->
        <div class="score-container" id="statisticsContainer" style="display: none;">
            <!-- 統計内容はJavaScriptで動的生成 -->
        </div>
    </div>

    <!-- JavaScript読み込み -->
    <script src="data/questions.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/statistics.js"></script>
    <script src="js/quiz.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>